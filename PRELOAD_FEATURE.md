# 预加载功能说明

## 功能概述

预加载功能可以在用户访问短链接的中间页面时，提前预加载目标链接的资源，从而加快用户的访问速度。

## 功能特点

### 1. 智能预加载时机
- **自动跳转模式**：在倒计时开始时进行预加载
- **二次确认模式**：在用户点击确认按钮后进行预加载  
- **密码验证模式**：在密码验证成功后进行预加载
- **人机验证模式**：在人机验证通过后进行预加载

### 2. 多层次预加载策略
- **DNS 预解析**：提前解析目标域名的IP地址
- **预连接**：建立TCP连接和TLS握手
- **资源预获取**：预加载目标页面的HTML内容

### 3. 安全考虑
- 直接访问模式不进行预加载，避免绕过安全检查
- 域名被拦截时不进行预加载
- 自动清理预加载元素，避免内存泄漏

## 设置选项

在管理员设置页面中，可以找到"预加载设置"选项：

- **启用链接预加载**：开启后在跳转页面提前预加载目标链接，加快访问速度
- **关闭链接预加载**：关闭后不会预加载目标链接，节省带宽

## 技术实现

### 预加载元素类型

1. **DNS 预解析**
   ```html
   <link rel="dns-prefetch" href="https://example.com">
   ```

2. **预连接**
   ```html
   <link rel="preconnect" href="https://example.com">
   ```

3. **资源预获取**
   ```html
   <link rel="prefetch" href="https://example.com/page">
   ```

### 预加载时机

| 跳转模式 | 预加载时机 |
|---------|-----------|
| 自动跳转 | 倒计时开始时（人机验证通过后） |
| 二次确认 | 点击确认按钮后 |
| 密码验证 | 密码验证成功后 |
| 人机验证 | 验证通过后 |

### 性能优化

- 预加载元素会在5秒后自动清理，避免内存泄漏
- 只在需要时进行预加载，不会影响页面加载性能
- 预加载失败不会影响正常的跳转功能

## 使用效果

启用预加载功能后，用户在访问短链接时：

1. 在中间页面等待期间，系统会自动预加载目标链接
2. 当用户点击跳转或自动跳转时，目标页面加载速度明显提升
3. 特别是对于网络延迟较高的用户，效果更加明显

## 兼容性

- 支持所有现代浏览器
- 对于不支持预加载的旧浏览器，功能会自动降级，不影响正常使用
- 预加载失败时会在控制台输出警告信息，但不影响跳转功能

## 注意事项

1. 预加载会消耗一定的带宽，建议在网络条件良好时使用
2. 对于移动设备用户，可以考虑关闭预加载以节省流量
3. 预加载不会绕过浏览器的安全策略和CORS限制